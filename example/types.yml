---
version: edm_1_0

relation_types:

  depends_on:
    extends: null
    properties: {}
    operations:
      pre_configure_source: {}
      pre_configure_target: {}
      post_configure_source: {}
      post_configure_target: {}
      target_changed: {}
      target_removed: {}

  hosted_on:
    extends: depends_on

  connects_to:
    extends: depends_on

  subscribes_to:
    extends: connects_to


component_types:

  base:
    extends: null
    description: The base type
    metadata: {}
    properties:
      id:
        type: string
        description: A unique identifier of the realized instance
    operations:
      create: {}
      configure: {}
      start: {}
      stop: {}
      delete: {}

  compute:
    extends: base
    properties:
      ip_address:
        type: string
        description: The public IP address assigned for the instance
      os_family:
        type: string
        description: Specifies the type of operating system
        default: linux

  compute_cloud:
    extends: compute
    properties:
      machine_image:
        type: string
        description: The name of the machine image to use
      instance_type:
        type: string
        description: The name of the instance type to provision
      key_name:
        type: string
        description: The name of the key pair to use for authentication
      public_key:
        type: string
        description: The public key of the key pair to use for authentication

  software_component:
    extends: base

  tomcat:
    extends: software_component
    properties:
      port:
        type: integer
        description: Port number
        default: 8080

  service_cloud_aws:
    extends: base
    properties:
      aws_access_key:
        type: string
      aws_secret_access_key:
        type: string
      aws_region:
        type: string

  service_cloud_aws_ec2:
    extends: service_cloud_aws
    properties:
      vpc_security_group:
        type: string
      subnet:
        type: string

  service_cloud_aws_sqs:
    extends: service_cloud_aws
    properties:
      queue_name:
        type: string

  service_cloud_aws_lambda:
    extends: service_cloud_aws
    properties:
      handler:
        type: string
        default: index.handler
      memory_size:
        type: integer
        default: 512
      timeout:
        type: integer
        default: 3
